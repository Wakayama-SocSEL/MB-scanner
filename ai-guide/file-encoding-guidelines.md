# 日本語ファイル作成時の注意事項

**重要度**: 🔴 高

## 背景
- Write/Edit系ツールで日本語を含むファイルを編集すると UTF-8 が壊れ、文字化けや SyntaxError が発生する。
- 影響: Python モジュールのインポート失敗、`just fix` / `just typecheck` のエラー。

## 安全な運用フロー
1. 日本語を含むファイルの新規作成・大幅編集は Bash + heredoc（`cat <<'EOT'` など）で行う。
2. heredoc 開始マーカーは必ずシングルクォートで囲み、シェル展開を防ぐ。
3. 編集後は `python -c "import ..."` などで読み込み確認を行う。

### 例
```bash
cat > /path/to/file.py <<'EOT'
"""日本語 docstring"""
# 日本語コメント
EOT
```

## 避けるべき操作
- Write/Edit/Apply_patch などで日本語を含むファイルを直接書き換える。
- heredoc でクォート無しのマーカーを使う。

## チェックリスト
- [ ] 日本語を扱う場合は Bash + heredoc を使った。
- [ ] 編集後に簡易インポートまたはテストを実行した。
- [ ] 文字化けが起きた場合は Bash で再生成した。

## クイックリファレンス
| 内容 | 推奨ツール | 備考 |
|------|------------|------|
| 日本語 docstring/コメント | Bash + heredoc | ✅ 安全 |
| 日本語を含む既存ファイルの修正 | Bash + heredoc で再出力 | |
| 英語のみのファイル | Write/Edit 可 | |
