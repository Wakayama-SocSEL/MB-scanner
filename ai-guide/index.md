# AI Guide Index - MB-search 開発ガイド

本ディレクトリは、リポジトリでコードを扱う際の AI 支援開発用ガイドです。AI エージェントからアクセスされた場合は、以下の手順を順守してください。

1. **初期確認**: この `index.md` を読み、全体ルールと最新の目次を把握してください。
2. **必要に応じた読込**: 作業内容に応じて、下記「ファイル一覧」から該当トピックのみを読み込んでください。不要なファイルは開かず、コンテキスト長を節約します。
3. **ドキュメント更新時の流れ**:
	1. 新しいトピックを追加する場合は、まずこのファイルにリンクと 1 行程度の概要を追記します。
	2. 続いて個別ファイル（例：`ai-guide/architecture.md`、`ai-guide/cli-design.md` など）を作成または更新します。
	3. 既存トピックの拡張でも、目次と概要が最新か確認し、必要なら修正してください。
4. **複雑なタスクの進め方とコンテキスト管理**: 実装が複雑で、やりとりのコンテキストが長くなりそうなタスクに着手する前に、まず実装計画やタスクの分割案をマークダウン形式で作成してください。その計画は、プロジェクトルートの `.ai/tasks/` ディレクトリに一時的に保存します。ファイル名は `YYYY-MM-DD-feature-name.md` のように、日付とタスク内容がわかるようにしてください。これにより、コンテキスト長を節約し、複数回にわたるやりとりでも一貫性を保つことができます。
5. **作業完了時のチェック**: コード実装後は `pytest`、`just fix`、`just typecheck` を必ず実行し、結果を共有してください。

## 全体ルール

全てのやりとりは日本語で行ってください。

新しい機能やサービス層を実装する際は、必ずテストも作成してください。テストなしでの実装は受け入れられません。

コードの実装が終わった段階で、必ず以下のコマンドを実行してコード品質を確認してください：
- `pytest`: テストを実行して全てパスすることを確認
- `just fix`: コードのフォーマットと自動修正を実行
- `just typecheck`: 型チェックを実行

## ファイル一覧

以下を参照してください。

1. [project-overview.md](./project-overview.md) - プロジェクト概要
2. [db-design.md](./db-design.md) - データベース設計ドキュメント
3. [testing-guidelines.md](./testing-guidelines.md) - テストガイドライン（必読）
